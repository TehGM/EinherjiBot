@using TehGM.EinherjiBot.PlaceholdersEngine
@using TehGM.EinherjiBot.UI.PlaceholdersEngine

@inject IPlaceholdersBuilder PlaceholdersDialog

<MudFab Color="MudBlazor.Color.Dark" Size="Size.Medium" IconColor="MudBlazor.Color.Secondary" StartIcon="@Icons.Filled.Code" Label="Placeholder Builder" 
    OnClick="this.OnPlaceholdersDialogClickedAsync" />

@code {
    [Parameter]
    public EventCallback<PlaceholderBuilderResult> PlaceholderChosen { get; set; }
    [Parameter]
    public EventCallback Cancelled { get; set; }

    private async Task OnPlaceholdersDialogClickedAsync(MouseEventArgs e)
    {
        PlaceholderBuilderResult result = await this.PlaceholdersDialog.OpenAsync(PlaceholderUsage.Status);
        if (result?.IsSuccess == true)
            await this.PlaceholderChosen.InvokeAsync(result);
        else
            await this.Cancelled.InvokeAsync();
    }
}
